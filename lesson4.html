<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AIvest — Уровень 4: Теория и тест</title>
<style>
  body { font-family: Arial, sans-serif; margin:0; padding:0; background:#f9fafb; color:#1e3a8a; }
  body.dark { background:#0b1220; color:#e6eefc; }
  header { background:#2563eb; color:white; padding:1rem; text-align:center; }
  main { max-width:800px; margin:2rem auto; padding:0 1rem; }
  h2 { color:#2563eb; }
  p { margin-bottom:1rem; line-height:1.5; }
  .btn { padding:.5rem 1rem; border:none; border-radius:.5rem; background:#2563eb; color:white; cursor:pointer; margin-top:1rem; }
  .question { margin-top:2rem; padding:1rem; border:1px solid #2563eb; border-radius:.75rem; background:#e0f2fe; }
  .question.dark { background:#07172f; border-color:#3b82f6; }
  .options { margin-top:1rem; display:flex; flex-direction:column; gap:.5rem; }
  .options label { display:flex; align-items:center; gap:.5rem; cursor:pointer; }
  .feedback { margin-top:1rem; font-weight:bold; }
  #nextLevel { display:none; margin-top:2rem; text-align:center; }
</style>
</head>
<body>
<header>
  <h1>Уровень 4: Диверсификация портфеля</h1>
</header>
<main>
  <section id="theory">
    <h2>Теория</h2>
    <p>Диверсификация — это распределение инвестиций между разными активами, чтобы снизить риск. Если одна акция падает, убытки могут компенсироваться ростом других активов.</p>
    <p>Правильная диверсификация помогает сбалансировать риск и доходность портфеля.</p>
    <p>Инвестор может использовать разные классы активов (акции, облигации, криптовалюту) и различные сектора экономики для снижения риска.</p>
    <button class="btn" onclick="showQuestion()">Перейти к тесту</button>
  </section>

  <section id="question" style="display:none;">
    <h2>Тест</h2>
    <div class="question" id="q1">
      <p>Что является целью диверсификации портфеля?</p>
      <div class="options">
        <label><input type="radio" name="q1" value="wrong"> Увеличить риск для большей прибыли</label>
        <label><input type="radio" name="q1" value="right"> Снизить общий риск инвестиций</label>
        <label><input type="radio" name="q1" value="wrong"> Инвестировать только в одну отрасль</label>
      </div>
      <button class="btn" onclick="checkAnswer()">Проверить</button>
      <div class="feedback" id="feedback"></div>
    </div>
  </section>

  <!-- Секция для кнопки перехода на следующий уровень -->
  <section id="nextLevel">
    <button class="btn" onclick="goNextLevel()">Перейти к уровню 5</button>
  </section>

</main>

<script>
function showQuestion(){
  document.getElementById('theory').style.display = 'none';
  document.getElementById('question').style.display = 'block';
}

function checkAnswer(){
  const radios = document.getElementsByName('q1');
  let selected = null;
  radios.forEach(r => { if(r.checked) selected = r.value; });
  const feedback = document.getElementById('feedback');
  if(!selected){ feedback.textContent = "Выберите ответ!"; return; }

  if(selected === 'right'){
    feedback.textContent = "Верно! Диверсификация снижает общий риск портфеля.";
    // сохраняем прогресс
    localStorage.setItem('lessonProgress', JSON.stringify({...JSON.parse(localStorage.getItem('lessonProgress')||"{}"), 4:true}));
    // показываем кнопку перехода на следующий уровень
    document.getElementById('nextLevel').style.display = 'block';
  } else {
    feedback.textContent = "Неверно. Попробуйте ещё раз.";
  }
}

// функция для перехода на следующий уровень
function goNextLevel(){
  window.location.href = 'lesson.html?level=5';
}
</script>
</body>
</html>
